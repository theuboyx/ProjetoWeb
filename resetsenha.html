<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Recuperar senha - CodeMovie</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root{ --bg-img: url('https://images.unsplash.com/photo-1595769816263-9b910be24d5f?q=80&w=1179'); }
html,body{height:100%;margin:0;font-family:Arial;background:#111;color:#fff;background-image:var(--bg-img);background-size:cover;background-position:center}
body::before{content:"";position:fixed;inset:0;background:rgba(0,0,0,0.55)}
.box{position:relative;margin:40px auto;padding:24px;width:360px;border-radius:12px;background:rgba(28,28,28,0.92);box-shadow:0 0 18px rgba(46,115,226,0.45);z-index:2}
.box h2{color:#8ab4ff;text-align:center;margin-bottom:8px}
.input-box{position:relative;margin:12px 0}
.input-box input{width:100%;padding:12px 40px;border-radius:6px;border:1px solid #2a2a2a;background:#1f1f1f;color:#fff}
.input-box i{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:#8ab4ff}
.btn-primary{background:#0b65c2;border:none;padding:10px;border-radius:8px;font-weight:700;}
.small{font-size:13px;color:#a0a0a0;margin-top:8px}
a{color:#9bb8ff;display:block;text-align:center;margin-top:12px}
</style>
</head>
<body>

<div class="box">
  <h2>Recuperar senha</h2>
  <p class="small">Digite o e-mail cadastrado para redefinir a senha.</p>

  <div class="input-box">
    <i class="fa-solid fa-envelope"></i>
    <input id="email" placeholder="Seu e-mail" />
  </div>

  <div id="msg" class="small"></div>

  <button class="btn btn-primary w-100" onclick="sendReset()">Enviar</button>

  <a href="index.html">Voltar ao login</a>
</div>

<script>
function sendReset(){
  const email = document.getElementById('email').value.trim();
  const msg = document.getElementById('msg');
  if(!email){ msg.style.color='salmon'; msg.textContent='Informe um e-mail'; return; }

  const users = JSON.parse(localStorage.getItem('cm_users') || '[]');
  const user = users.find(u=>u.email === email);
  if(!user){ msg.style.color='salmon'; msg.textContent='E-mail não encontrado'; return; }

  // For simplicity: allow reset by prompting new password (client-side)
  const newPass = prompt('E-mail encontrado. Digite a nova senha (mín 6 caracteres):');
  if(newPass === null) { msg.style.color='#a0a0a0'; msg.textContent='Operação cancelada'; return; }
  if(newPass.length < 6){ msg.style.color='salmon'; msg.textContent='Senha muito curta'; return; }

  // update user
  user.password = newPass;
  localStorage.setItem('cm_users', JSON.stringify(users));
  msg.style.color='lightgreen'; msg.textContent='Senha atualizada com sucesso. Você pode fazer login agora.';
}
</script>

</body>
</html>
